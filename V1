TweenService = game:GetService("TweenService")
Lighting = game:GetService("Lighting")
replicatedStorage = game:GetService("ReplicatedStorage")
UIS = game:GetService("UserInputService")
RunService = game:GetService("RunService")

player = game.Players.LocalPlayer
character = player.Character
humanoid = character:FindFirstChildOfClass("Humanoid")
HMNRT = character:FindFirstChild("HumanoidRootPart")
Camera = workspace.CurrentCamera
plrGui = player.PlayerGui

local ScreenGui = Instance.new("ScreenGui");
ScreenGui.Parent = plrGui

if workspace:FindFirstChild("Map"):FindFirstChild("Util"):FindFirstChild("PlayerBlockedOnly") then
	workspace:FindFirstChild("Map"):FindFirstChild("Util"):FindFirstChild("PlayerBlockedOnly"):Destroy()
end


local function MakeDraggableButton(button: ImageButton, MoveFrame)
	local dragging = false;	local dragStart
	local startPos;	local firstPos
	button.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			Icon_Position = button.Position
			startPos = MoveFrame.Position
			if not firstPos then
				firstPos = MoveFrame.Position
			end
		end
	end)
	UIS.InputChanged:Connect(function(input)
		if dragging and (input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement) then
			local delta = input.Position - dragStart
			MoveFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
			if input.UserInputType == Enum.UserInputType.Touch then
				Camera.CameraType = Enum.CameraType.Scriptable
			end
		end
	end)
	UIS.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = false
			Camera.CameraType = Enum.CameraType.Custom
		end
	end)
end
local function createSlider(sliderTrack, sliderThumb, onSlide, MaxValue)
	local dragging = false
	MaxValue = MaxValue or 100
	local function getSliderRange()
		return sliderTrack.AbsoluteSize.X - sliderThumb.AbsoluteSize.X
	end
	local function tweenSliderTo(xPos)
		local maxX = getSliderRange()
		xPos = math.clamp(xPos, 0, maxX)
		local goal = {Position = UDim2.new(0, xPos, sliderThumb.Position.Y.Scale, sliderThumb.Position.Y.Offset)}
		local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Sine, Enum.EasingDirection.Out)
		TweenService:Create(sliderThumb, tweenInfo, goal):Play()
		if typeof(onSlide) == "function" then
			local percent = xPos / maxX
			local value = math.floor(percent * MaxValue + 0.5)
			onSlide(value)
		end
	end
	sliderTrack.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			local relativeX = input.Position.X - sliderTrack.AbsolutePosition.X - sliderThumb.AbsoluteSize.X / 2
			tweenSliderTo(relativeX)
		end
	end)
	UIS.InputChanged:Connect(function(input)
		if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
			local relativeX = input.Position.X - sliderTrack.AbsolutePosition.X - sliderThumb.AbsoluteSize.X / 2
			tweenSliderTo(relativeX)
		end
	end)
	UIS.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = false
		end
	end)
	local function setSliderByValue(value)
		value = math.clamp(value, 0, MaxValue)
		local maxX = getSliderRange()
		local xPos = (value / MaxValue) * maxX
		sliderThumb.Position = UDim2.new(0, xPos, sliderThumb.Position.Y.Scale, sliderThumb.Position.Y.Offset)
	end
	return {SetValue = setSliderByValue}
end
local function rotateImageButton(imageButton, duration)
	local tweenInfo = TweenInfo.new(duration,Enum.EasingStyle.Sine,	Enum.EasingDirection.Out,0,false)
	local goal = {Rotation = 360}
	local tween = TweenService:Create(imageButton, tweenInfo, goal)
	tween:Play()
end

local function tweenButtonColor(button, color, time, Image)
	local tweenInfo = TweenInfo.new(time or 0.2,Enum.EasingStyle.Sine,Enum.EasingDirection.Out)
	local goal
	if Image and Image == true then
		goal = {ImageColor3 = color}
	else
		goal = {BackgroundColor3 = color}
	end	
	TweenService:Create(button, tweenInfo, goal):Play()
end

local function tweenFrameSize(frame, newSize, time)
	local tweenInfo = TweenInfo.new(time or 0.2,Enum.EasingStyle.Sine,Enum.EasingDirection.Out)
	local goal = {Size = newSize}
	TweenService:Create(frame, tweenInfo, goal):Play()
end

local function tweenFramePosition(frame, newPosition, time)
	local tweenInfo = TweenInfo.new(time or 0.2,Enum.EasingStyle.Sine,Enum.EasingDirection.Out)
	local goal = {Position = newPosition}
	TweenService:Create(frame, tweenInfo, goal):Play()
end

task.spawn(function()
	local fullText = ">>> SOMTANK-Script <<<" ; local windowSize = 6
	while true do
		for i = 1, #fullText - windowSize + 1 do
			local view = fullText:sub(i, i + windowSize - 1)
			ScreenGui.Name = view
			wait(0.1)
		end
	end
end)

local function MakeTextButton(Parent, Size, Posi, BGtran, Color, Text)
	local NewFrame = Instance.new("TextButton", Parent)
	NewFrame.Position = Posi
	NewFrame.Size = Size
	NewFrame.BackgroundTransparency = BGtran
	NewFrame.Text = Text
	NewFrame.TextScaled = true
	NewFrame.TextColor3 = Color
	NewFrame.Font = Enum.Font.Highway
	return NewFrame
end

local function MakeImageButton(Parent, Size, Posi, BGtran, Color, Imtran, imageID)
	local NewFrame = Instance.new("ImageButton", Parent)
	local UICorner = Instance.new("UICorner", NewFrame)
	NewFrame.Position = Posi
	NewFrame.Size = Size
	NewFrame.BackgroundTransparency = BGtran
	NewFrame.Image = imageID or ""
	NewFrame.ImageTransparency = Imtran
	NewFrame.BackgroundColor3 = Color
	NewFrame.ImageColor3 = Color
	NewFrame.ZIndex = 2
	return NewFrame
end

local function MakeText(Parent, Size, Posi, BGtran, Color, Visible, Text)
	local NewFrame = Instance.new("TextLabel", Parent)
	NewFrame.Position = Posi
	NewFrame.Size = Size	
	NewFrame.TextColor3 = Color
	NewFrame.BackgroundTransparency = BGtran
	NewFrame.Visible = Visible
	NewFrame.Text = Text
	NewFrame.TextScaled = true
	NewFrame.Font = Enum.Font.Highway
	return NewFrame
end

local function MakeFrame(Parent, Size, Posi, BGtran, Color, Visible, UiConner)
	local NewFrame = Instance.new("Frame", Parent)
	NewFrame.Position = Posi
	NewFrame.Size = Size	
	NewFrame.BackgroundColor3 = Color
	NewFrame.BackgroundTransparency = BGtran
	NewFrame.Visible = Visible
	if UiConner and UiConner == true then
		local NewUiConner = Instance.new("UICorner", NewFrame)
		NewUiConner.CornerRadius = UDim.new(0, 7)
	end	
	return NewFrame
end

local function MakeScrolling(Parent, Size, Posi, BGtran, Color, Visible)
	local NewFrame = Instance.new("ScrollingFrame", Parent)
	local UIListLayout = Instance.new("UIListLayout", NewFrame)
	NewFrame.Position = Posi
	NewFrame.Size = Size
	NewFrame.BackgroundColor3 = Color
	NewFrame.BackgroundTransparency = BGtran
	NewFrame.Visible = Visible
	NewFrame.ScrollBarThickness = 0
	UIListLayout.Padding = UDim.new(0,7)
	return NewFrame
end

local function MakeImageLabel(Parent, Size, Posi, BGtran, Color, Imtran, ImageID)
	local NewFrame = Instance.new("ImageLabel", Parent)
	NewFrame.Position = Posi
	NewFrame.Size = Size
	NewFrame.BackgroundTransparency = BGtran
	NewFrame.Image = ImageID
	NewFrame.ImageTransparency = Imtran
	NewFrame.ImageColor3 = Color
	return NewFrame
end

local function MakeTextBox(Parent, Size, Posi, BGtran, Color , Text)
	local NewFrame = Instance.new("TextBox", Parent)
	NewFrame.Position = Posi
	NewFrame.Size = Size
	NewFrame.BackgroundTransparency = BGtran
	NewFrame.PlaceholderText = Text
	NewFrame.PlaceholderColor3 = Color
	NewFrame.TextColor3 = Color
	NewFrame.TextScaled = true
	NewFrame.Text = ""
	NewFrame.Font = Enum.Font.Highway
	return NewFrame
end

local MainFrame = MakeFrame(ScreenGui, UDim2.new(0, 417,0, 299), UDim2.new(0.246, 0,0.100, 0), 0, Color3.new(1, 1, 1), true, true)

local MovePad = MakeImageLabel(MainFrame, UDim2.new(0, 344,0, 43), UDim2.new(0, 0,0, 0), 1, Color3.new(1, 1, 1), 0, "")

local SelectMode = MakeScrolling(MainFrame, UDim2.new(0, 193,0, 247), UDim2.new(-0.101, 0,0.144, 0), 1, Color3.new(0.0980392, 0.0745098, 0.219608), true, true)
SelectMode.Name = "SelectMode"

local Line = MakeFrame(MainFrame, UDim2.new(0, 3,0, 247), UDim2.new(0.37, 0,0.144, 0), 0, Color3.new(1, 1, 1), true, true)
task.spawn(function()
	local gradient = Instance.new("UIGradient", Line); gradient.Rotation = 90; gradient.Color = ColorSequence.new{ColorSequenceKeypoint.new(0, Color3.fromRGB(106, 20, 255)), 	ColorSequenceKeypoint.new(0.5, Color3.fromRGB(187, 147, 255)), ColorSequenceKeypoint.new(1, Color3.fromRGB(106, 20, 255))}
	while wait() do
		if gradient.Offset.Y < 1 then
			gradient.Offset += Vector2.new(0, 0.04)
		else
			gradient.Offset = Vector2.new(0, -1)
		end
	end
end)

local Close_EYE = MakeTextButton(MainFrame, UDim2.new(0, 26,0, 24), UDim2.new(0.825, 0,0.013, 0), 1, Color3.new(0.466667, 0.113725, 1), "-")

local Close_Panal = MakeTextButton(MainFrame, UDim2.new(0, 26,0, 24), UDim2.new(0.921, 0,0.013, 0), 1, Color3.new(0.466667, 0.113725, 1), "X")

Close_EYE.Activated:Connect(function()
	MainFrame.Visible = false
end)

Close_Panal.Activated:Connect(function()
	local ByeSound = Instance.new("Sound", game.SoundService)
	ByeSound.SoundId = "rbxassetid://154157386"
	ByeSound:Play()
	ByeSound.Name = "ByeSound_" .. player.Name
	ScreenGui:Destroy()
end)

local LoadingFrame = MakeFrame(MainFrame, UDim2.new(0, 417,0, 299), UDim2.new(0, 0,0, 0), 0, Color3.new(0.0980392, 0.0745098, 0.219608), true, true)
local LoadingBar1 = MakeFrame(LoadingFrame, UDim2.new(0, 253,0, 11), UDim2.new(0.197, 0,0.807, 0), 0, Color3.new(0.0509804, 0.0392157, 0.117647), true, true)
local LoadingBar2 = MakeFrame(LoadingFrame, UDim2.new(0, 0,0, 11), UDim2.new(0.197, 0,0.807, 0), 0, Color3.new(0.368627, 0.286275, 0.854902), true, true)
local LoadingText = MakeText(LoadingFrame, UDim2.new(0, 203,0, 20), UDim2.new(0.252, 0,0.711, 0), 1, Color3.new(0.513725, 0.286275, 1), true, "ยินดีต้อนรับ " .. player.DisplayName)
local LoadingIcon = MakeImageLabel(LoadingFrame, UDim2.new(0, 130,0, 128), UDim2.new(0.343, 0,0.257, 0), 1, Color3.new(1, 1, 1), 0, "rbxassetid://80019916158199")
local gradient_IconLoad = Instance.new("UIGradient", LoadingIcon); gradient_IconLoad.Rotation = 45; gradient_IconLoad.Color = ColorSequence.new{ColorSequenceKeypoint.new(0, Color3.fromRGB(111, 28, 255)), 	ColorSequenceKeypoint.new(0.5, Color3.fromRGB(163, 135, 255)), ColorSequenceKeypoint.new(1, Color3.fromRGB(111, 28, 255))}
LoadingFrame.ZIndex = 2;LoadingBar1.ZIndex = 3;LoadingBar2.ZIndex = 4;LoadingText.ZIndex = 3;LoadingIcon.ZIndex = 3; gradient_IconLoad.Offset = Vector2.new(0, -1.5)
task.spawn(function()
	wait(1)
	while wait(math.random(0.1,0.9)) do
		if gradient_IconLoad then
			if gradient_IconLoad.Offset.Y < 1.5 then
				gradient_IconLoad.Offset += Vector2.new(0, 0.05)
			end
		end
	end
end)
task.spawn(function()
	local Loading_Studs = 0
	wait(1.8)
	while wait(math.random(0.1,0.9)) do
		if Loading_Studs >= 249 then
			Loading_Finish = true
			tweenFrameSize(LoadingBar1, UDim2.new(0, 253,0, 0), 0.8)
			tweenFrameSize(LoadingBar2, UDim2.new(0, Loading_Studs,0, 0), 1.2)
			tweenFrameSize(LoadingText, UDim2.new(0, 203,0, 0), 1.2)
			tweenFrameSize(LoadingIcon, UDim2.new(0, 130,0, 0), 0.3)			
			tweenFrameSize(LoadingFrame, UDim2.new(0, 417,0, 0), 1.2)
			wait(1.4)
			LoadingFrame:Destroy()
		else
			Loading_Studs = Loading_Studs + math.random(1,10)
			tweenFrameSize(LoadingBar2, UDim2.new(0, 0 + Loading_Studs,0, 11), 0.2)
		end
		if Loading_Studs >= 120 then
			LoadingText.Text = "ขอบคุณที่ใช้สคริปค้าบ"
		end
	end
end)

local IconFrame = MakeImageLabel(MainFrame, UDim2.new(0, 32,0, 31), UDim2.new(0.017, 0,0.013, 0), 1, Color3.new(0.435294, 0.109804, 1), 0, "rbxassetid://80019916158199")
local TitleText = MakeText(MainFrame, UDim2.new(0, 112,0, 32), UDim2.new(0.118, 0,0.013, 0), 1, Color3.new(0.466667, 0.286275, 1), true, "Somtank")
local VersionText = MakeText(MainFrame, UDim2.new(0, 163,0, 20), UDim2.new(0.41, 0,0.054, 0), 1, Color3.new(0.466667, 0.286275, 1), true, "V0.0.2")
local FOR_ICON = Instance.new("UIAspectRatioConstraint", IconFrame)
TitleText.TextXAlignment = Enum.TextXAlignment.Left
VersionText.TextXAlignment = Enum.TextXAlignment.Left
VersionText.TextTransparency = 0.4

local MoveIcon = MakeImageButton(ScreenGui, UDim2.new(0, 53,0, 51), UDim2.new(0.100, 0,0.447, 0), 1, Color3.new(1, 1, 1), 0, "rbxassetid://81129676934693")
local FOR_MoveIcon = Instance.new("UIAspectRatioConstraint", MoveIcon)
MakeDraggableButton(MoveIcon, MoveIcon)
MakeDraggableButton(MovePad, MainFrame)
MainFrame.BackgroundColor3 = Color3.new(0.0980392, 0.0745098, 0.219608)
local FOR_MainFrame = Instance.new("UICorner", MainFrame)
MoveIcon.Activated:Connect(function()
	if Icon_Position == MoveIcon.Position then
		if MainFrame.Visible == false then
			MainFrame.Visible = true
		else
			MainFrame.Visible = false
		end
	end
end)
MoveIcon.MouseEnter:Connect(function()
	MoveIcon.ImageColor3 = Color3.new(0.745098, 0.745098, 0.745098)
end)
MoveIcon.MouseLeave:Connect(function()
	MoveIcon.ImageColor3 = Color3.new(1, 1, 1)
end)

local SelectMode_Now = MainFrame
local function Create_ModeButton(Name)
	local MainButton1 = MakeFrame(ScreenGui, UDim2.new(0, 191,0, 36), UDim2.new(0, 0,0, 0), 1, Color3.new(0.141176, 0.12549, 0.368627), true, true)
	local BackgroundMain = MakeFrame(MainButton1, UDim2.new(0, 142,0, 36), UDim2.new(0.257, 0,0, 0), 0, Color3.new(0.141176, 0.12549, 0.368627), true, true)
	local TextMainButton1 = MakeText(MainButton1, UDim2.new(0, 118,0, 28), UDim2.new(0.338, 0,0.104, 0), 1, Color3.new(0.529412, 0.313725, 1), true, Name)
	local ColorMainButton1 = MakeFrame(MainButton1, UDim2.new(0, 7,0, 36), UDim2.new(0.257, 0,0, 0), 0, Color3.new(0.145098, 0.133333, 0.392157), true, true)
	local Button1 = MakeImageButton(MainButton1, UDim2.new(1, 0,1, 0), UDim2.new(0, 0,0, 0), 1, Color3.new(1, 1, 1), 1)
	MainButton1.Visible = false
	wait()
	ColorMainButton1.Name = "ColorFrame"
	local SelectFuntion = MakeScrolling(MainFrame, UDim2.new(0, 249,0, 247), UDim2.new(0.387, 0,0.144, 0), 1, Color3.new(0.0980392, 0.0745098, 0.219608), true, true)
	SelectFuntion.Name = "SelectFuntion_" .. Name
	SelectFuntion.Visible = false
	SelectFuntion.CanvasSize = UDim2.new(0, 0, 10, 0)
	Button1.Activated:Connect(function()
		SelectMode_Now = MainButton1
		for _, L in ipairs(SelectMode:GetChildren()) do
			if L and L:IsA("Frame") and L:FindFirstChild("ColorFrame") then
				local ColorFrame = L:FindFirstChild("ColorFrame")
				ColorFrame.BackgroundColor3 = Color3.new(0.145098, 0.133333, 0.392157)
			end
		end
		for _, B in ipairs(MainFrame:GetChildren()) do
			if B and B:IsA("ScrollingFrame") and B.Name ~= "SelectMode" then
				if B.Name ~= "SelectFuntion_" .. Name then
					B.Visible = false
				else
					B.Visible = true
				end				
			end
		end
		tweenButtonColor(ColorMainButton1, Color3.new(0.45098, 0, 1), 0.17)
	end)
	local NewHoldSize = 5
	Button1.MouseEnter:Connect(function()
		if Loading_Finish == true then
			tweenFrameSize(MainButton1, UDim2.new(0, 191,0, 36 + NewHoldSize), 0.3)
			tweenFrameSize(ColorMainButton1, UDim2.new(0, 7,0, 36 + NewHoldSize), 0.5)
			tweenFrameSize(TextMainButton1, UDim2.new(0, 131,0, 28 + NewHoldSize), 0.3)
			tweenButtonColor(ColorMainButton1, Color3.new(0.364706, 0, 0.807843), 0.25)			
			tweenFrameSize(BackgroundMain, UDim2.new(0, 191,0, 36 + NewHoldSize), 0.3)
			tweenFramePosition(BackgroundMain, UDim2.new(0, 0,0, 0), 0.3)		
			tweenFramePosition(ColorMainButton1, UDim2.new(0, 0,0, 0), 0.3)
			tweenFramePosition(TextMainButton1, UDim2.new(0.18, 0,0.104, 0), 0.3)
		end
	end)
	Button1.MouseLeave:Connect(function()
		if Loading_Finish == true then
			tweenFrameSize(MainButton1, UDim2.new(0, 144,0, 36), 0.3)
			tweenFrameSize(ColorMainButton1, UDim2.new(0, 8,0, 36), 0.3)
			tweenFrameSize(TextMainButton1, UDim2.new(0, 131,0, 28), 0.3)
			tweenFrameSize(BackgroundMain, UDim2.new(0, 142,0, 36), 0.3)
			tweenFramePosition(BackgroundMain, UDim2.new(0, 50,0, 0), 0.3)
			tweenFramePosition(ColorMainButton1, UDim2.new(0.32, 0,0, 0), 0.3)
			tweenFramePosition(TextMainButton1, UDim2.new(0.38, 0,0.104, 0), 0.3)
			if SelectMode_Now and SelectMode_Now ~= MainButton1 then
				tweenButtonColor(ColorMainButton1, Color3.new(0.145098, 0.133333, 0.392157), 0.17)
			end
		end	
	end)	
	MainButton1.Parent = SelectMode
	MainButton1.Visible = true
	return Button1 , SelectFuntion
end

-----   สร้างหมวดหหมู่  [ Create Mode ]

ModePlayer, ModePlayer_SelectFuntion = Create_ModeButton(" ผู้เล่น 👤 ")

ModeAuto, ModeAuto_SelectFuntion = Create_ModeButton(" อัตโนมัติ ⚡ ")

ModeDrag, ModeDrag_SelectFuntion = Create_ModeButton(" ดึงฟอนิเจอร์ 🪑 ")

ModeDrag2, ModeDrag2_SelectFuntion = Create_ModeButton(" ดึงอาหาร 🍖 ")

ModeEsp, ModeEsp_SelectFuntion = Create_ModeButton(" การมองเห็น 👁️ ")

---- End!!

local function Create_Line(Parent, Name)
	local MainButton1 = MakeFrame(ScreenGui, UDim2.new(0, 248,0, 24), UDim2.new(0, 0,0, 0), 1, Color3.new(0.141176, 0.12549, 0.368627), true, true)
	local TextMainButton1 = MakeText(MainButton1, UDim2.new(0.916, 0,1, 0), UDim2.new(0.095, 0,-0.007, 0), 1, Color3.new(0.529412, 0.313725, 1), true, "<b> " .. Name .. " </b>")
	local ColorMainButton1 = MakeFrame(MainButton1, UDim2.new(0, 16,0, 6), UDim2.new(0, 0,0.375, 0), 0, Color3.new(0.45098, 0, 1), true, true)
	MainButton1.Visible = false
	wait()
	ColorMainButton1.Name = "Line_" .. Name
	MainButton1.Parent = Parent
	MainButton1.Visible = true
	TextMainButton1.RichText = true
	TextMainButton1.TextXAlignment = Enum.TextXAlignment.Left
	return MainButton1
end

local function Create_Toggle(Parent, Name)
	local MainButton1 = MakeFrame(ScreenGui, UDim2.new(0, 248,0, 36), UDim2.new(0, 0,0, 0), 0, Color3.new(0.141176, 0.12549, 0.368627), true, true)
	local TextMainButton1 = MakeText(MainButton1, UDim2.new(0, 131,0, 28), UDim2.new(0.055, 0,0.076, 0), 1, Color3.new(0.529412, 0.313725, 1), true, Name)
	local ColorMainButton1 = MakeFrame(MainButton1, UDim2.new(0, 8,0, 36), UDim2.new(0, 0,0, 0), 0, Color3.new(0.145098, 0.133333, 0.392157), true, true)
	local Button1 = MakeImageButton(MainButton1, UDim2.new(0, 28,0, 29), UDim2.new(0.86, 0,0.082, 0), 0, Color3.new(0.270588, 0.196078, 0.443137), 1)
	MainButton1.Visible = false
	Button1.Activated:Connect(function()
		Button1.Active = false
		if ColorMainButton1.BackgroundColor3 == Color3.new(0.45098, 0, 1) then
			tweenButtonColor(ColorMainButton1, Color3.new(0.145098, 0.133333, 0.392157), 0.17)
			tweenButtonColor(Button1, Color3.new(0.270588, 0.196078, 0.443137), 0.17)
		else
			tweenButtonColor(ColorMainButton1, Color3.new(0.45098, 0, 1), 0.17)
			tweenButtonColor(Button1, Color3.new(0.45098, 0, 1), 0.17)
		end
		wait(0.2)
		Button1.Active = true
	end)	
	wait()
	ColorMainButton1.Name = "Toggle_" .. Name
	MainButton1.Parent = Parent
	MainButton1.Visible = true
	return Button1, TextMainButton1
end

local function Create_Click(Parent, Name, Name2)
	local MainButton1 = MakeFrame(ScreenGui, UDim2.new(0, 248,0, 36), UDim2.new(0, 0,0, 0), 0, Color3.new(0.141176, 0.12549, 0.368627), true, true)
	local TextMainButton1 = MakeText(MainButton1, UDim2.new(0, 131,0, 28), UDim2.new(0.055, 0,0.076, 0), 1, Color3.new(0.529412, 0.313725, 1), true, Name)
	local ColorMainButton1 = MakeFrame(MainButton1, UDim2.new(0, 8,0, 36), UDim2.new(0, 0,0, 0), 0, Color3.new(0.145098, 0.133333, 0.392157), true, true)
	local Button1 = MakeImageButton(MainButton1, UDim2.new(0, 28,0, 29), UDim2.new(0.86, 0,0.082, 0), 0, Color3.new(0.270588, 0.196078, 0.443137), 1)
	MainButton1.Visible = false
	Button1.Activated:Connect(function()
		Button1.Active = false
		ColorMainButton1.BackgroundColor3 = Color3.new(0.45098, 0, 1)
		Button1.BackgroundColor3 = Color3.new(0.45098, 0, 1)		
		tweenButtonColor(ColorMainButton1, Color3.new(0.145098, 0.133333, 0.392157), 0.4)
		tweenButtonColor(Button1, Color3.new(0.270588, 0.196078, 0.443137), 0.4)
		wait(0.2)
		Button1.Active = true
	end)	
	wait()
	ColorMainButton1.Name = "Click_" .. Name
	if Name2 then
		MainButton1.Name = Name2..Name
	end
	MainButton1.Parent = Parent
	MainButton1.Visible = true
	return Button1, TextMainButton1, MainButton1
end

local function Create_SelectPick(Parent, Name, CanvasSize)
	local MainButton1 = MakeFrame(ScreenGui, UDim2.new(0, 248,0, 36), UDim2.new(0, 0,0, 0), 0, Color3.new(0.141176, 0.12549, 0.368627), true, true)
	local TextMainButton1 = MakeText(MainButton1, UDim2.new(0, 149,0, 28), UDim2.new(0.055, 0,0.02, 0), 1, Color3.new(0.529412, 0.313725, 1), true, Name)
	local ColorMainButton1 = MakeFrame(MainButton1, UDim2.new(0, 8,0, 36), UDim2.new(0, 0,0, 0), 0, Color3.new(0.145098, 0.133333, 0.392157), true, true)
	local Button1 = MakeImageButton(MainButton1, UDim2.new(0, 28,0, 29), UDim2.new(0.86, 0,0.082, 0), 0, Color3.new(0.270588, 0.196078, 0.443137), 1)
	local Scrolling = MakeScrolling(MainButton1, UDim2.new(0, 131,0, 0), UDim2.new(0.055, 0,0.076, 0), .75, Color3.new(0, 0, 0), true, false)
	local ResetButton = MakeImageButton(MainButton1, UDim2.new(0, 28,0, 28), UDim2.new(0.69, 0,0.019, 0), 1, Color3.new(0.580392, 0.388235, 1), 0, "rbxassetid://438217404")
	ResetButton.Activated:Connect(function()
		ResetButton.ImageColor3 = Color3.new(1, 1, 1)
		ResetButton.Rotation = 0
		tweenButtonColor(ResetButton, Color3.new(0.580392, 0.388235, 1), 0.7, true)		
		rotateImageButton(ResetButton, 0.7)
	end)	
	MainButton1.Visible = false
	Button1.Activated:Connect(function()
		Button1.Active = false
		if ColorMainButton1.BackgroundColor3 == Color3.new(0.45098, 0, 1) then
			tweenButtonColor(ColorMainButton1, Color3.new(0.145098, 0.133333, 0.392157), 0.17)
			tweenButtonColor(Button1, Color3.new(0.270588, 0.196078, 0.443137), 0.17)
			Scrolling.Visible = false
			tweenFramePosition(TextMainButton1, UDim2.new(0, 15,0, 3), 0.3)
			tweenFramePosition(Button1, UDim2.new(0.86, 0,0.1, 0), 0.3)
			tweenFrameSize(MainButton1, UDim2.new(0, 248,0, 36), 0.3)
			tweenFrameSize(ColorMainButton1, UDim2.new(0, 8,0, 36), 0.3)
			tweenFramePosition(Scrolling, UDim2.new(0.052, 0,0.22, 0), 0.3)
			tweenFrameSize(Scrolling, UDim2.new(0, 228,0, 0), 0.3)
		else
			tweenButtonColor(ColorMainButton1, Color3.new(0.45098, 0, 1), 0.17)
			tweenButtonColor(Button1, Color3.new(0.45098, 0, 1), 0.17)
			Scrolling.Visible = true
			tweenFramePosition(TextMainButton1, UDim2.new(0, 15,0, 3), 0.3)
			tweenFramePosition(Button1, UDim2.new(0.86, 0,0.019, 0), 0.3)
			tweenFrameSize(MainButton1, UDim2.new(0, 248,0, 183), 0.3)
			tweenFrameSize(ColorMainButton1, UDim2.new(0, 8,0, 183), 0.3)
			tweenFramePosition(Scrolling, UDim2.new(0.052, 0,0.23, 0), 0.3)			
			tweenFrameSize(Scrolling, UDim2.new(0, 228,0, 132), 0.3)
		end
		wait(0.2)
		Button1.Active = true
	end)	
	wait()
	Scrolling.CanvasSize = UDim2.new(0, 0, CanvasSize, 0)
	ColorMainButton1.Name = "SelectPick_" .. Name
	MainButton1.Parent = Parent
	MainButton1.Visible = true
	local Info_Folder = Instance.new("Folder", MainButton1)	
	return Scrolling, Info_Folder, ResetButton
end

local function Create_Click_InSC(Parent, Name)
	local MainButton1 = MakeFrame(ScreenGui, UDim2.new(0, 228,0, 33), UDim2.new(0, 0,0, 0), 0, Color3.new(0.164706, 0.152941, 0.443137), true, true)
	local TextMainButton1 = MakeText(MainButton1, UDim2.new(0, 131,0, 28), UDim2.new(0.055, 0,0.076, 0), 1, Color3.new(0.529412, 0.313725, 1), true, Name)
	local ColorMainButton1 = MakeFrame(MainButton1, UDim2.new(0, 8,0, 33), UDim2.new(0, 0,0, 0), 0, Color3.new(0.145098, 0.133333, 0.392157), true, true)
	local Button1 = MakeImageButton(MainButton1, UDim2.new(0, 28,0, 29), UDim2.new(0.86, 0,0.082, 0), 0, Color3.new(0.270588, 0.196078, 0.443137), 1)
	MainButton1.Visible = false
	Button1.Activated:Connect(function()
		Button1.Active = false
		ColorMainButton1.BackgroundColor3 = Color3.new(0.45098, 0, 1)
		Button1.BackgroundColor3 = Color3.new(0.45098, 0, 1)		
		tweenButtonColor(ColorMainButton1, Color3.new(0.145098, 0.133333, 0.392157), 0.17)
		tweenButtonColor(Button1, Color3.new(0.270588, 0.196078, 0.443137), 0.17)
		wait(0.2)
		Button1.Active = true
	end)	
	wait()
	ColorMainButton1.Name = "Click_" .. Name
	MainButton1.Parent = Parent
	MainButton1.Visible = true
	return Button1, ColorMainButton1
end

local function Create_Toggle_InSC(Parent, Name)
	local MainButton1 = MakeFrame(ScreenGui, UDim2.new(0, 228,0, 33), UDim2.new(0, 0,0, 0), 0, Color3.new(0.164706, 0.152941, 0.443137), true, true)
	local TextMainButton1 = MakeText(MainButton1, UDim2.new(0, 131,0, 28), UDim2.new(0.055, 0,0.076, 0), 1, Color3.new(0.529412, 0.313725, 1), true, Name)
	local ColorMainButton1 = MakeFrame(MainButton1, UDim2.new(0, 8,0, 33), UDim2.new(0, 0,0, 0), 0, Color3.new(0.145098, 0.133333, 0.392157), true, true)
	local Button1 = MakeImageButton(MainButton1, UDim2.new(0, 28,0, 29), UDim2.new(0.86, 0,0.082, 0), 0, Color3.new(0.270588, 0.196078, 0.443137), 1)
	MainButton1.Visible = false
	Button1.Activated:Connect(function()
		Button1.Active = false
		if ColorMainButton1.BackgroundColor3 == Color3.new(0.45098, 0, 1) then
			tweenButtonColor(ColorMainButton1, Color3.new(0.145098, 0.133333, 0.392157), 0.17)
			tweenButtonColor(Button1, Color3.new(0.270588, 0.196078, 0.443137), 0.17)
		else
			tweenButtonColor(ColorMainButton1, Color3.new(0.45098, 0, 1), 0.17)
			tweenButtonColor(Button1, Color3.new(0.45098, 0, 1), 0.17)
		end
		wait(0.2)
		Button1.Active = true
	end)	
	wait()
	ColorMainButton1.Name = "Toggle_InSC_" .. Name
	MainButton1.Parent = Parent
	MainButton1.Visible = true
	return Button1, ColorMainButton1
end

local function Create_Slide_Textbox(Parent, Name, NameInTextBox, ValueNow)
	local MainButton1 = MakeFrame(ScreenGui, UDim2.new(0, 248,0, 114), UDim2.new(0, 0,0, 0), 0, Color3.new(0.141176, 0.12549, 0.368627), true, true)
	local TextMainButton1 = MakeText(MainButton1, UDim2.new(0, 131,0, 28), UDim2.new(0.055, 0,0.076, 0), 1, Color3.new(0.529412, 0.313725, 1), true, Name)
	local TextBox = MakeTextBox(MainButton1, UDim2.new(0, 158,0, 29), UDim2.new(0.055, 0,0.673, 0), 1, Color3.new(0.596078, 0.32549, 1) , NameInTextBox)
	local ColorMainButton1 = MakeFrame(MainButton1, UDim2.new(0, 8,0, 114), UDim2.new(0, 0,0, 0), 0, Color3.new(0.145098, 0.133333, 0.392157), true, true)
	local ShowValue = MakeText(MainButton1, UDim2.new(0, 59,0, 25), UDim2.new(0.734, 0,0.687, 0), 1, Color3.new(0.466667, 0.286275, 1), true, ValueNow)	
	local SlideBar = MakeFrame(MainButton1, UDim2.new(0, 222,0, 8), UDim2.new(0.065, 0,0.439, 0), 0, Color3.new(0.494118, 0.258824, 1), true, true)
	local Bar = MakeFrame(SlideBar, UDim2.new(0, 13,0, 22), UDim2.new(0.605, 0,-1, 0), 0, Color3.new(0.407843, 0.113725, 1), true, true)
	local ResetButton = MakeImageButton(MainButton1, UDim2.new(0, 28,0, 28), UDim2.new(0.86, 0,0.053, 0), 1, Color3.new(0.580392, 0.388235, 1), 0, "rbxassetid://438217404")
	ResetButton.Activated:Connect(function()
		ResetButton.ImageColor3 = Color3.new(1, 1, 1)
		ResetButton.Rotation = 0
		tweenButtonColor(ResetButton, Color3.new(0.580392, 0.388235, 1), 0.7, true)		
		rotateImageButton(ResetButton, 0.7)
	end)	
	MainButton1.Visible = false
	wait()
	ColorMainButton1.Name = "Toggle_" .. Name
	MainButton1.Parent = Parent
	MainButton1.Visible = true
	return SlideBar, Bar, TextBox, ShowValue, ColorMainButton1, ResetButton
end

local function matchesAllowedKeyword(value, allowedKeywords)
	value = value:lower()
	for _, keyword in ipairs(allowedKeywords) do
		if string.find(value, keyword:lower()) then
			return true
		end
	end
	return false
end

---------------- **** ModePlayer_SelectFuntion ****
local ModePlayer1 = Create_Line(ModePlayer_SelectFuntion, "การเคลื่อนไหว")
local WalkSpeed = 16 ; local Defalse_WalkSpeed = 16
local PlayerSpeed_SlideBar, PlayerSpeed_Bar, PlayerSpeed_TextBox, PlayerSpeed_ShowValue, PlayerSpeed_Color, PlayerSpeed_ResetButton = Create_Slide_Textbox(ModePlayer_SelectFuntion, "ความเร็วการเดิน", "ใส่ค่าที่ต้องการเลยครับ", WalkSpeed)
local function SetSlider(Bar, Slide, Defalse_Value, Color)
	local slider_WalkSpeed = createSlider(Bar, Slide, function(value)
		WalkSpeed = value
		PlayerSpeed_TextBox.Text = ""
	end, 150)
	slider_WalkSpeed.SetValue(WalkSpeed)
	PlayerSpeed_TextBox.FocusLost:Connect(function(enterPressed)
		local text = PlayerSpeed_TextBox.Text
		local number = tonumber(text)
		if number then
			WalkSpeed = number
			slider_WalkSpeed.SetValue(number)
		else
			PlayerSpeed_TextBox.Text = ""
		end
	end)
	PlayerSpeed_ResetButton.Activated:Connect(function()
		WalkSpeed = Defalse_WalkSpeed
		slider_WalkSpeed.SetValue(Defalse_WalkSpeed)
	end)	
	task.spawn(function()
		local Set_Stop = false
		local moveDirection = humanoid.MoveDirection
		while wait(0.1) do
			PlayerSpeed_ShowValue.Text = WalkSpeed
			humanoid.WalkSpeed = WalkSpeed
			if tonumber(PlayerSpeed_ShowValue.Text) == Defalse_Value then
				tweenButtonColor(Color, Color3.new(0.145098, 0.133333, 0.392157), 0.17)
			else
				tweenButtonColor(Color, Color3.new(0.45098, 0, 1), 0.17)
			end
		end
	end)
end
SetSlider(PlayerSpeed_SlideBar, PlayerSpeed_Bar, Defalse_WalkSpeed, PlayerSpeed_Color)
local function convertJumpHeightToPower(jumpHeight)
	local gravity = workspace.Gravity
	return math.sqrt(2 * gravity * jumpHeight)
end
local JumpPower = 50 ; local Defalse_JumpPower = 50
local JumpPower_SlideBar, JumpPower_Bar, JumpPower_TextBox, JumpPower_ShowValue, JumpPower_Color, JumpPower_ResetButton = Create_Slide_Textbox(ModePlayer_SelectFuntion, "พลังการกระโดด", "ใส่ค่าที่ต้องการเลยครับ", JumpPower)
local function SetSlider2(Bar, Slide, Defalse_Value, Color)
	local slider_JumpPower = createSlider(Bar, Slide, function(value)
		JumpPower = value;	JumpPower_TextBox.Text = ""
	end, 300)
	slider_JumpPower.SetValue(JumpPower)
	JumpPower_TextBox.FocusLost:Connect(function(enterPressed)
		local text = JumpPower_TextBox.Text
		local number = tonumber(text)
		if number then
			JumpPower = number
			slider_JumpPower.SetValue(number)
		else
			JumpPower_TextBox.Text = ""
		end
	end)
	JumpPower_ResetButton.Activated:Connect(function()
		JumpPower = Defalse_JumpPower
		slider_JumpPower.SetValue(Defalse_JumpPower)
	end)
	task.spawn(function()
		while wait(0.05) do
			JumpPower_ShowValue.Text = JumpPower
			humanoid.JumpPower = JumpPower
			humanoid.JumpHeight = convertJumpHeightToPower(JumpPower) / 15
			if tonumber(JumpPower_ShowValue.Text) == Defalse_Value then
				tweenButtonColor(Color, Color3.new(0.145098, 0.133333, 0.392157), 0.17)
			else
				tweenButtonColor(Color, Color3.new(0.45098, 0, 1), 0.17)
			end
		end
	end)
end
SetSlider2(JumpPower_SlideBar, JumpPower_Bar, Defalse_JumpPower, JumpPower_Color)
local Infinit_Jump_Button, Infinit_Jump_Text = Create_Toggle(ModePlayer_SelectFuntion, "กระโดดไม่จำกัด")
local Infinit_Jump = false;Infinit_Jump_Button.Activated:Connect(function()
	if Infinit_Jump == false then
		Infinit_Jump = true
	else
		Infinit_Jump = false		
	end	
end)
UIS.JumpRequest:Connect(function()
	if Infinit_Jump == true then
		humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)
local Active_Fly_Button = Create_Toggle(ModePlayer_SelectFuntion, "บิน")
local Active_Fly = false;Active_Fly_Button.Activated:Connect(function()
	if Active_Fly == false then
		Active_Fly = true
		Fly()
	else
		Active_Fly = false		
	end	
end)
local Fly_Speed = 1 ; local Max_Fly_Speed = 15
local Fly_Speed_SlideBar, Fly_Speed_Bar, Fly_Speed_TextBox, Fly_Speed_ShowValue, Fly_Speed_Color, Fly_Speed_ResetButton = Create_Slide_Textbox(ModePlayer_SelectFuntion, "ความเร็วการบิน", "ใส่ค่าที่ต้องการเลยครับ", Fly_Speed)
local function SetSlider3(Bar, Slide, Defalse_Value, Color)
	local slider_Fly_Speed = createSlider(Bar, Slide, function(value)
		Fly_Speed = value;	Fly_Speed_TextBox.Text = ""
	end, 15)
	slider_Fly_Speed.SetValue(Fly_Speed)
	Fly_Speed_TextBox.FocusLost:Connect(function(enterPressed)
		local text = Fly_Speed_TextBox.Text
		local number = tonumber(text)
		if number then
			Fly_Speed = number
			slider_Fly_Speed.SetValue(number)
		else
			Fly_Speed_TextBox.Text = ""
		end
	end)
	Fly_Speed_ResetButton.Activated:Connect(function()
		Fly_Speed = 1
		slider_Fly_Speed.SetValue(1)
	end)
	task.spawn(function()
		while wait(0.05) do
			Fly_Speed_ShowValue.Text = Fly_Speed
			if tonumber(Fly_Speed_ShowValue.Text) == Defalse_Value then
				tweenButtonColor(Color, Color3.new(0.145098, 0.133333, 0.392157), 0.17)
			else
				tweenButtonColor(Color, Color3.new(0.45098, 0, 1), 0.17)
			end
		end
	end)
end
SetSlider3(Fly_Speed_SlideBar, Fly_Speed_Bar, Fly_Speed, Fly_Speed_Color)
function Fly()
	wait()
	local Human = humanoid
	local Torso = HMNRT
	local Force = Instance.new("BodyVelocity")
	local Spin = Instance.new("BodyGyro")
	Spin.P = 10000
	Spin.MaxTorque = Vector3.new(Spin.P,Spin.P,Spin.P)*100
	Spin.CFrame = Torso.CFrame
	Force.Velocity = Vector3.new(0,0,0)
	Force.P = 1000
	Force.MaxForce = Vector3.new(Force.P,Force.P,Force.P)*100
	Force.Parent = Torso
	Spin.Parent = Torso
	Human.PlatformStand = true
	Human.AutoRotate = false
	Human:ChangeState(Enum.HumanoidStateType.Freefall)
	while Active_Fly do
		wait()
		local Push = Vector3.new(0, 0, 0)
		local FV = Camera.CFrame:VectorToWorldSpace(Vector3.new(0, 0, -1))
		local SV = Camera.CFrame:VectorToWorldSpace(Vector3.new(-1, 0, 0))
		local CoFrame = Camera.CFrame
		local CV = CFrame.new(Vector3.new(0,0,0),CoFrame.LookVector*Vector3.new(1,0,1)):VectorToObjectSpace(Human.MoveDirection)
		Push = Push + ((FV * (60*Fly_Speed) * -CV.z) or Push)
		Push = Push + ((SV * (40*Fly_Speed) * -CV.x) or Push)
		Spin.CFrame = CFrame.new(Vector3.new(0, 0, 0), FV)
		Force.Velocity = Force.Velocity:Lerp(Push, 0.2)
		if not Human.PlatformStand then
			Human.PlatformStand = true
		end
		if Human.AutoRotate then
			Human.AutoRotate = false
		end
	end
	Spin:Destroy()
	Force:Destroy()
	Human.PlatformStand = false
	Human.AutoRotate = true
end

local NoclipConnection = nil
local originalCanCollideMap = {}
function noclip()
	if NoclipConnection then NoclipConnection:Disconnect() end
	NoclipConnection = RunService.Stepped:Connect(function()
		if character and character:IsDescendantOf(workspace) then
			for _, part in ipairs(character:GetDescendants()) do
				if part:IsA("BasePart") and part.CanCollide == true then
					if originalCanCollideMap[part] == nil then
						originalCanCollideMap[part] = true
					end
					part.CanCollide = false
				end
			end
		end
	end)
end
function clip()
	if NoclipConnection then
		NoclipConnection:Disconnect()
		NoclipConnection = nil
	end
	for part, wasCollidable in pairs(originalCanCollideMap) do
		if wasCollidable and part and part:IsA("BasePart") then
			part.CanCollide = true
		end
	end
	originalCanCollideMap = {}
end
local Noclip_Button = Create_Toggle(ModeAuto_SelectFuntion, "Noclip")
local Noclip = true ; Noclip_Button.Activated:Connect(function()
	if Noclip == false then
		Noclip = true
		clip()
	else
		Noclip = false
		noclip()
	end
end)
local ModePlayer2 = Create_Line(ModePlayer_SelectFuntion, "แสงและเงา 💡")

local Nofog_Button = Create_Toggle(ModePlayer_SelectFuntion, "ปิดหมอก")
local Nofog = false;Nofog_Button.Activated:Connect(function()
	if Nofog == false then
		Nofog = true
	else
		Nofog = false
		Lighting.FogEnd = 300
		Lighting.FogStart = 50
	end	
end)
local Brightness_Button = Create_Toggle(ModePlayer_SelectFuntion, "เพิ่มแสง")
local Brightness = false;Brightness_Button.Activated:Connect(function()
	if Brightness == false then
		Brightness = true
	else
		Brightness = false
		Lighting.Brightness = 1
	end	
end)
task.spawn(function()
	while wait(1) do
		if Nofog == true then
			Lighting.FogEnd = 5000
			Lighting.FogStart = 5000
			Lighting.ClockTime = 12
		end
		if Brightness == true then
			Lighting.Brightness = 2
		end
	end
end)

local AutoFillHunger = false ; local Auto_FOOD = false
local AutoFillHunger_Button = Create_Toggle(ModeAuto_SelectFuntion, "กินข้าวออโต้ 🍔")
AutoFillHunger_Button.Activated:Connect(function()
	if AutoFillHunger == false then
		AutoFillHunger = true
	else
		AutoFillHunger = false
	end	
end)

task.spawn(function()
	local Equipped = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Item"):WaitForChild("Equipped")
	local Activated = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Item"):WaitForChild("Activated")
	local Util_Items = workspace:WaitForChild("Map"):WaitForChild("Util"):WaitForChild("Items")
	local HungerBar = plrGui:WaitForChild("CharacterGui"):WaitForChild("BottomFrame"):WaitForChild("CharacterInfo"):WaitForChild("Energy"):FindFirstChild("Bar")
	while wait(1) do
		if AutoFillHunger == true then
			if HungerBar and HungerBar.Size.X.Scale < 0.6 then
				Auto_FOOD = true
			end
			if Auto_FOOD == true then
				repeat
					for _, Model in ipairs(player.Backpack:GetChildren()) do
						pcall(function()
							if matchesAllowedKeyword(Model.Name, {"Burger", "Hotdog", "Ham", "Cola"}) then
								if not character:FindFirstChildOfClass("Tool") then
									Model.Parent = character
								else
									character:FindFirstChildOfClass("Tool").Parent = player.Backpack
									wait(0.5)
									Model.Parent = character
									wait(0.5)
									if character:FindFirstChildOfClass("Tool") then
										Activated:FireServer(Model)
									end
								end
								wait()
							end
						end)
					end
					wait(0.5)
				until HungerBar.Size.X.Scale > 0.7
				Auto_FOOD = false
			end
		end
	end
end)

---***** ModeDrag_SelectFuntion ******----

local ModeDragLine_2 = Create_Line(ModeDrag_SelectFuntion, "ตั้งค่า ⚙️")

local Bring_Count = 100 ; local Max_Bring_Count = 100
local Bring_Count_SlideBar, Bring_Count_Bar, Bring_Count_TextBox, Bring_Count_ShowValue, Bring_Count_Color, Bring_Count_ResetButton = Create_Slide_Textbox(ModeDrag_SelectFuntion, "จำนวนที่ต้องการดึง", "ใส่ค่าที่ต้องการเลยครับ", Bring_Count)
local function SetSlider4(Bar, Slide, Defalse_Value, Color)
	local slider_Bring_Count = createSlider(Bar, Slide, function(value)
		Bring_Count = value;	Bring_Count_TextBox.Text = ""
	end, 100)
	slider_Bring_Count.SetValue(Bring_Count)
	Bring_Count_TextBox.FocusLost:Connect(function(enterPressed)
		local text = Bring_Count_TextBox.Text
		local number = tonumber(text)
		if number then
			Bring_Count = number
			slider_Bring_Count.SetValue(number)
		else
			Bring_Count_TextBox.Text = ""
		end
	end)
	Bring_Count_ResetButton.Activated:Connect(function()
		Bring_Count = 1
		slider_Bring_Count.SetValue(1)
	end)
	task.spawn(function()
		while wait(0.1) do
			Bring_Count_ShowValue.Text = Bring_Count
			if tonumber(Bring_Count_ShowValue.Text) == Max_Bring_Count then
				tweenButtonColor(Color, Color3.new(0.145098, 0.133333, 0.392157), 0.17)
			else
				tweenButtonColor(Color, Color3.new(0.45098, 0, 1), 0.17)
			end
		end
	end)
end
SetSlider4(Bring_Count_SlideBar, Bring_Count_Bar, Bring_Count, Bring_Count_Color)

local Objects = workspace:WaitForChild("Map"):WaitForChild("Util"):WaitForChild("Objects")
local RequestPickup = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):FindFirstChild("RequestPickup")
local DropObject = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):FindFirstChild("DropObject")

local OldPosition_CFrame = HMNRT.CFrame



local BringMode_Active = false
local CurrentBringThread = nil

local function BringItemWithItem2(item2)
	pcall(function()
		HMNRT.CFrame = item2.PrimaryPart.CFrame
		wait(0.1)
		RequestPickup:InvokeServer(item2)
		wait(0.1)
		HMNRT.CFrame = OldPosition_CFrame
		wait(0.1)
		DropObject:InvokeServer(CFrame.new(HMNRT.Position.X, HMNRT.Position.Y, HMNRT.Position.Z + 7))
	end)
end

local ModeDragLine_2 = Create_Line(ModeDrag_SelectFuntion, "ไอเท็มที่มีขณะนี้ 📦")

local MetalBring_Button = Create_Click(ModeDrag_SelectFuntion, "แผ่นเหล็ก 🔗")
MetalBring_Button.Activated:Connect(function()
	BringMode_Active = not BringMode_Active
	if BringMode_Active then
		OldPosition_CFrame = HMNRT.CFrame
		CurrentBringThread = task.spawn(function()
			local Bring_Count_Work = 0
			for _, item2 in ipairs(Objects:GetChildren()) do
				if not BringMode_Active then break end
				if matchesAllowedKeyword(item2.Name, {"BigMetal", "SmallMetal"}) and item2.PrimaryPart then
					if Bring_Count_Work < Bring_Count then
						BringItemWithItem2(item2)
						Bring_Count_Work += 1
					end
				end
			end
			if OldPosition_CFrame then
				HMNRT.CFrame = OldPosition_CFrame
			end
			BringMode_Active = false
		end)
	end
end)

local BringStates = {}

local function ResetAllItemInServer()
	for _, item in ipairs(ModeDrag_SelectFuntion:GetChildren()) do
		if item:IsA("Frame") and matchesAllowedKeyword(item.Name, {"Reset_"}) then
			item:Destroy()
		end
		wait()
	end
	for _, item in ipairs(Objects:GetChildren()) do
		local keyName = "Reset_" .. item.Name
		if not ModeDrag_SelectFuntion:FindFirstChild(keyName) then
			local NewBring_Button = Create_Click(ModeDrag_SelectFuntion, item.Name, "Reset_")
			NewBring_Button.Activated:Connect(function()
				BringStates[item.Name] = not BringStates[item.Name]
				if BringStates[item.Name] then
					OldPosition_CFrame = HMNRT.CFrame
					task.spawn(function()
						local Bring_Count_Work = 0
						for _, item2 in ipairs(Objects:GetChildren()) do
							if not BringStates[item.Name] then break end
							if item2.Name == item.Name and item2.PrimaryPart then
								if Bring_Count_Work < Bring_Count then
									BringItemWithItem2(item2)
									Bring_Count_Work += 1
								end
							end
						end
						if OldPosition_CFrame then
							HMNRT.CFrame = OldPosition_CFrame
						end
						BringStates[item.Name] = false
					end)
				end
			end)
		end
		wait()
	end
end
ModeDrag.Activated:Connect(function()
	ResetAllItemInServer()
end)


---***** ModeDrag2_SelectFuntion ******----

local RequestPickupItem = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("RequestPickupItem")

local function BringItemWithItem3(item2)
	pcall(function()
		HMNRT.CFrame = item2.Handle.CFrame
		wait(0.1)
		RequestPickupItem:FireServer(item2)
		wait(0.1)
		HMNRT.CFrame = OldPosition_CFrame
		wait(0.1)
	end)
end

local ModeDragLine_2 = Create_Line(ModeDrag2_SelectFuntion, "ไอเท็มที่มีขณะนี้ 📦")

local Items = workspace:WaitForChild("Map"):WaitForChild("Util"):WaitForChild("Items")

local function ResetAllItemInServer2()
	for _, item in ipairs(ModeDrag2_SelectFuntion:GetChildren()) do
		if item:IsA("Frame") and matchesAllowedKeyword(item.Name, {"Reset_"}) then
			item:Destroy()
		end
		wait()
	end
	for _, item in ipairs(Items:GetChildren()) do
		if not ModeDrag2_SelectFuntion:FindFirstChild("Reset_"..item.Name) then
			local NewBring_Button = Create_Click(ModeDrag2_SelectFuntion, item.Name, "Reset_")
			NewBring_Button.Activated:Connect(function()
				OldPosition_CFrame = HMNRT.CFrame
				local Bring_Count_Work = 0
				for _, item2 in ipairs(Items:GetChildren()) do
					if item2.Name == item.Name and item2:FindFirstChild("Handle") then
						if Bring_Count_Work < Bring_Count then
							BringItemWithItem3(item2)
							Bring_Count_Work = Bring_Count_Work + 1
						end
					end
				end
				if OldPosition_CFrame then
					HMNRT.CFrame = OldPosition_CFrame
				end
			end)
		end
		wait()
	end
end
ModeDrag2.Activated:Connect(function()
	ResetAllItemInServer2()
end)

-----***** ModeEsp_SelectFuntion ******-----

ModeMoreLine_1 = Create_Line(ModeEsp_SelectFuntion, "การมองเห็น 👁️")

EspChest_Button = Create_Toggle(ModeEsp_SelectFuntion, "มองชื่อผู้เล่น")
local EspChest = false;EspChest_Button.Activated:Connect(function()
	if EspChest == false then
		EspChest = true
	else
		EspChest = false
		for _, OtherPlayer in ipairs(game:GetService("Players"):GetChildren()) do
			if OtherPlayer ~= player and OtherPlayer.Character then
				if OtherPlayer.Character:FindFirstChild("SOmtankChestESP") then
					OtherPlayer.Character:FindFirstChild("SOmtankChestESP"):Destroy()
				end
				if OtherPlayer.Character:FindFirstChild("SOmtankChestBil") then
					OtherPlayer.Character:FindFirstChild("SOmtankChestBil"):Destroy()
				end
			end
		end
	end	
end)
task.spawn(function()
	while wait(6) do
		if EspChest == true then
			for _, OtherPlayer in ipairs(game:GetService("Players"):GetChildren()) do
				if OtherPlayer ~= player and OtherPlayer.Character then
					if not OtherPlayer:FindFirstChild("SOmtankChestESP") then
						local NewHi = Instance.new("Highlight", OtherPlayer.Character)
						local NewBil = Instance.new("BillboardGui", OtherPlayer.Character)
						local NewText = Instance.new("TextLabel", NewBil)
						NewHi.Name = "SOmtankChestESP"
						NewBil.Name = "SOmtankChestBil"
						NewHi.OutlineTransparency = 1
						NewHi.FillColor = Color3.new(0.407843, 0.352941, 1)
						NewText.BackgroundTransparency = 1
						NewText.TextColor3 = Color3.new(0.415686, 0.184314, 1)
						NewText.Text = OtherPlayer.Name
						NewBil.Size = UDim2.new(0, 200,0, 50)
						NewBil.SizeOffset = Vector2.new(0, 0.5)
						NewBil.AlwaysOnTop = true
						NewText.Size = UDim2.new(0, 200,0, 50)
						NewText.TextYAlignment = Enum.TextYAlignment.Top
						NewText.TextSize = 26
						NewText.Font = Enum.Font.Highway
					end
				end
			end
		end	
	end
end)

------- ***** Start Script Loop *****

